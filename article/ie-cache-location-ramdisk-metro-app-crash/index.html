<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="author" content="Xiangyu Bu">
        <meta name="description" content="Xiangyu&#39;s personal blog.">
        <meta name="keywords" content="xiangyu,bu,xbu,blog,tech,onedrived">
        <meta name="generator" content="Hugo 0.31.1" />

        <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">

        <link rel="stylesheet" href="/dist/theme.css">

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.2.1/dist/instantsearch.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.2.1/dist/instantsearch-theme-algolia.min.css">


        
        <title>Another Dimension  | IE Cache Location and Metro App Crash</title>
    </head>
    <body class="bilberry-hugo-theme">
        
<nav class="permanentTopNav">

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="/page/about/">About</a></li>
                
            
                
                    <li><a href="/page/resources/">Resources</a></li>
                
            
                
                    <li><a href="/page/projects/">Projects</a></li>
                
            
        </ul>

        

         <div id="search-box" class="search">
            <i class="fa fa-search"></i>
            <input id="search" type="text" placeholder="Search ...">
        </div>
        
    </div>
</nav>


        <header>
    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="https://www.gravatar.com/avatar/661d6e52bcde90223b84e56c54c568f6?d=mm&size=200" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title"><a href="/">Another Dimension</a></h3>
            
                <span class="subtitle">Xiangyu&#39;s personal blog.</span>
            
        </div>

        
        <div class="toggler permanentTopNav">
        
            <i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </div>
</header>


        <div class="main container">
            
     
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="/article/ie-cache-location-ramdisk-metro-app-crash/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="/article/ie-cache-location-ramdisk-metro-app-crash/">IE Cache Location and Metro App Crash</a></h3>
    <div class="meta">
        <span class="date moment">2014-10-04</span>

        
            <span class="categories">
                
                    <a href="/categories/troubleshooting">troubleshooting</a>
                
            </span>
        

        
            <span class="author"><a href="/author/xbu">xbu</a></span>
        
    </div>

    
        <p>For very long time I have been creating RAM disk and
pointing temp and cache dirs there to improve I/O performance and reduce
unnecessary SSD writes. Since Windows 8, changing the cache location of
IE (a.k.a. &ldquo;Temporary Internet Files&rdquo;) to a RAM disk could result in crashes of
Metro (a.k.a. &ldquo;Modern&rdquo;) apps, which I didn&rsquo;t figure out why until recently.
The problem is also observable in Windows 10.</p>

<p></p>

<p><a href="http://answers.microsoft.com/en-us/windows/forum/windows_8-winapps/windows-8-apps-crash-immediately-after-opening/f284fae3-2629-423b-8a2f-f02f0cdb5066">A Microsoft forum post</a> discussed troubleshooting the problem of
&ldquo;metro app crashes immediately after opening&rdquo;. But it&rsquo;s not the case here.</p>

<h2 id="symptom">Symptom</h2>

<p>Here is a list of apps I have found to be affected by the IE cache location:</p>

<h3 id="amazon-kindle-appear-to-crash-flash-exit">Amazon Kindle (appear to &ldquo;crash&rdquo; / flash exit)</h3>

<p><img src="/images/kindle-tile.png" alt="Amazon Kindle" /></p>

<p>After starting, the app seems to minimize itself to taskbar, and if you click
on it, it tries to load but goes minimized again. It crashes but does not exit.
On Windows 10 it crashes and exits after staying in splash screen for a minute
or so.</p>

<p>Related system error log</p>

<pre><code>Source: AppModel-State Failure to load the application settings for package AMZNMobileLLC.KindleforWindows8_stfe6vwa9jnbp. Error Code: 3

Source: AppHost App crashed with an unhandled Javascript exception. App details are as follows: Display Name:, AppUserModelId: &lt;amznmobilellc .kindleforwindows8_stfe6vwa9jnbp=\&quot;\&quot;&gt; Package Identity: PID:&lt;14204&gt;. The details of the JavaScript exception are as follows Exception Name:, Description: &gt;, HTML Document Path:, Source File Name:, Source Line Number:&lt;11&gt;, Source Column Number:&lt;59191&gt;, and Stack Trace: ms-appx://amznmobilellc.kindleforwindows8/kindle-min.js:11:59191 Anonymous function() ms-appx://amznmobilellc.kindleforwindows8/kindle-min.js:11:55820 Global code .&lt;/amznmobilellc&gt;
</code></pre>

<h3 id="latermark-appear-to-crash-flash-exit">Latermark (appear to &ldquo;crash&rdquo; / flash exit)</h3>

<p>The &ldquo;appear-to-crash&rdquo; behavior is the same as Kindle&rsquo;s. I have been in touch
with Latermark&rsquo;s developer (who is very responsive) since I found the app did
not work on my machine, and hopefully its next version will tell you some error
instead of &ldquo;flash exit&rdquo; when such problem is triggered.</p>

<p>[Update] After knowing the cause, the developer has made a page telling you &ldquo;something unexpected happened&rdquo; when this problem is triggered.</p>

<p><img src="/images/latermark-tile.png" alt="Latermark" /></p>

<p>Related error event:</p>

<pre><code>App crashed with an unhandled Javascript exception. App details are as follows: Display Name:, AppUserModelId: &lt;23234cthedot.Latermark_hxggmq2sf9ec6!App&gt; Package Identity:&lt;23234cthedot.Latermark_3.0.0.0_neutral__hxggmq2sf9ec6&gt; PID:&lt;5248&gt;. The details of the JavaScript exception are as follows Exception Name:, Description:, Source File Name:, Source Line Number:&lt;257&gt;, Source Column Number:&lt;7&gt;, and Stack Trace: ms-appx://23234cthedot.latermark/js/store.js:257:7 get(string) ms-appx://23234cthedot.latermark/js/latermark.js:77:7 _load() ms-appx://23234cthedot.latermark/js/latermark.js:72:5 Anonymous function() ms-appx://23234cthedot.latermark/js/latermark.js:108:3 Anonymous function() ms-appx://23234cthedot.latermark/js/latermark.js:2:2 Global code .
</code></pre>

<h3 id="nextgen-reader-cannot-associate-with-accounts-like-pocket">Nextgen Reader (cannot associate with accounts like Pocket)</h3>

<p><img src="/images/nextgen-error.png" alt="Nextgen Reader prompts error when linking to Pocket account." /></p>

<p>Nextgen Reader works fine until you try to link your accounts, for example, Pocket, to the app. An error toast notification will show up (like the picture above).</p>

<h3 id="hyper-for-youtube-cannot-play-video">Hyper for YouTube (cannot play video)</h3>

<p>If you see some error message from the app Hyper for YouTube like the picture below, it may be caused by you changing the IE cache location.</p>

<p><img src="/images/hyper-for-youtube-error.png" alt="Hyper for Youtube app shows &quot;item unavailable&quot;" /></p>

<h3 id="metrotube-cannot-play-video">Metrotube (cannot play video)</h3>

<p>Similar behavior as Hyper for YouTube.</p>

<h2 id="analysis">Analysis</h2>

<p>Windows <sup>8</sup>&frasl;<sub>8</sub>.1 Modern (&ldquo;Metro&rdquo;) apps need to access the IE cache location and they are forced to work under IE&rsquo;s Enhanced Protection Mode. This requires the IE cache location to be inside a NTFS partition of a disk visible in Disk Management Console (<code>diskmgmt.msc</code>). Not all RAM disk drivers emulate their drives that way.</p>

<h2 id="fix">Fix</h2>

<p>The dumbest way is to change the IE cache location back to default (<code>%USERPROFILE%\AppData\Local\Microsoft\Windows\Temporary Internet Files</code>).</p>

<p>To keep RAM disk AND have Metro apps work, there are two points to check:</p>

<ul>
<li>The RAMDrive must use NTFS filesystem, and</li>
<li>The drive is accessible in Metro apps. In other words, Open &ldquo;Run&rdquo; dialog (Win+R) and type &ldquo;<code>diskmgmt.msc</code>&rdquo; to open the Disk Management Console, the RAMDrive drive should be visible there.</li>
</ul>

<p>It&rsquo;s easy to get the first point with most RAM disk software, but few support the second. One free RAM disk software that does so is <a href="https://www.softperfect.com/products/ramdisk/">SoftPerfect RAM Disk</a>. One should choose NTFS filesystem AND enable &ldquo;hard disk emulation&rdquo;, although this dramatically reduces the RAM disk&rsquo;s performance.</p>
    
</div>

    
    
    <div class="tags">
        <i class="fa fa-tags"></i>
        
            <a href="/tags/microsoft">microsoft</a>
        
            <a href="/tags/windows">windows</a>
        
            <a href="/tags/ie">ie</a>
        
            <a href="/tags/troubleshoot">troubleshoot</a>
        
    </div>
    


</article>

        
    </div>

    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "xbu" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

     

        </div>

        <footer>
    <div class="container">
        <div class="recent-posts">
            <strong>Latest posts</strong>
                <ul>
                
                    <li>
                        <a href="/article/benchmarking-suricata-in-different-isolation-systems-using-tcpreplay/">Benchmarking Suricata in Different Isolation Systems Using TCPreplay</a>
                    </li>
                
                    <li>
                        <a href="/quote/andy-grove-paranoid/">Only the Paranoid Survive</a>
                    </li>
                
                    <li>
                        <a href="/article/onedrived/">onedrived - Microsoft OneDrive client for Linux</a>
                    </li>
                
                    <li>
                        <a href="/article/gitlab-ag/">gitlab-ag - Combining Git and Autograding</a>
                    </li>
                
                    <li>
                        <a href="/gallery/stockpulse-wp8/">StockPulse for WP8 - a StockTwits client for WP8</a>
                    </li>
                
                    <li>
                        <a href="/article/ie-cache-location-ramdisk-metro-app-crash/">IE Cache Location and Metro App Crash</a>
                    </li>
                
                    <li>
                        <a href="/code/remove-the-ad-of-outlook-com-with-stylish/">Remove the AD of Outlook.com with Stylish</a>
                    </li>
                
                </ul>
        </div>

        <div class="categories">
            <strong>Categories</strong>

            
                <ul>
                
                    <li>
                        <a href="/categories/editor">Editor (1)</a>
                    </li>
                
                    <li>
                        <a href="/categories/font">Font (1)</a>
                    </li>
                
                    <li>
                        <a href="/categories/project">Project (5)</a>
                    </li>
                
                    <li>
                        <a href="/categories/resource">Resource (3)</a>
                    </li>
                
                    <li>
                        <a href="/categories/tool">Tool (2)</a>
                    </li>
                
                    <li>
                        <a href="/categories/troubleshooting">Troubleshooting (1)</a>
                    </li>
                
                    <li>
                        <a href="/categories/tutorial">Tutorial (1)</a>
                    </li>
                
                </ul>
            
        </div>

        <div class="social-media">
            <strong>Social media</strong>

            
                <a href="https://www.facebook.com/xiangyu.bu" target="_blank"><i class="fa fa-facebook"></i></a>
            
            
            
            
            
                <a href="https://www.instagram.com/xybu92/" target="_blank"><i class="fa fa-instagram"></i></a>
            
            
            
            
            
                <a href="https://github.com/xybu" target="_blank"><i class="fa fa-github"></i></a>
            
            
                <a href="https://bitbucket.org/xybu/" target="_blank"><i class="fa fa-bitbucket"></i></a>
            
        </div>
    </div>
</footer>

<div class="credits">
    <div class="container">
        <div class="copyright">
             &copy; 2017 Xiangyu Bu. <br />
            Unless otherwise noted, licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0 License</a>.
        </div>
        <div class="author">
            Theme by <a href="https://github.com/Lednerb/bilberry-hugo-theme" target="_blank">Lednerb</a>
        </div>
    </div>
</div>


        
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-47913300-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


        
        
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']]}
        });
</script>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment-with-locales.min.js" integrity="sha256-TbOIe++NbC9P3KTtUMJ5wcROlBdnRqrPleLdpPg3xxE=" crossorigin="anonymous"></script>
        <script src="/dist/theme.js"></script>

        <script>
            $(document).ready(function() {
                $(".moment").each(function() {
                    $(this).text(
                        moment( $(this).text() )
                            .locale( "en" )
                            .format('LL')
                    );
                });

                $(".footnote-return sup").html("[return]")
            })
        </script>

        
            
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.29.0/autocomplete.jquery.min.js" integrity="sha256-qUqrH6CxKeU+3ClSSiq0GGnYjoKmfLhNO4tFoTCay5c=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/3.24.5/algoliasearch.min.js" integrity="sha256-vUvLcn3X0cXhote4PNwW6d+fzjJR0hoD+yGFeVaElew=" crossorigin="anonymous"></script>

<script>
    var client = algoliasearch("QWH90AJ7UA", "2b55d53047105f6dd3e8d30f7aadc3e9");
    var index = client.initIndex("xbu_me_index");

    $('#search').autocomplete({ hint: false, autoselect: true, debug: false },
      [
        {
          source: $.fn.autocomplete.sources.hits(index, { hitsPerPage: 5 }),
          displayKey: function(suggestion) {
            return suggestion.title || suggestion.author
          },
          templates: {
            suggestion: function(suggestion) {
                return "<span class='entry " + suggestion.type + "'>"
                      + "<span class='title'>" + suggestion.title + "</span>"
                      + "<span class='fa fa-fw " + suggestion.iconClass + "'></span>"
                  + "</span>"
                ;
            },
            empty: function() {
              return "<span class='empty'>Nothing found.</span>"
            },
            footer: function() {
              return '<div class="branding">Powered by <img src="https://www.algolia.com/static_assets/images/press/downloads/algolia-logo-light.svg" /></div>'
            }

          },
        }
      ])
      .on('autocomplete:selected', function(event, suggestion, dataset) {
        window.location = (suggestion.url);
      })
      .keypress(function (event, suggestion) {
        if (event.which == 13) {
          window.location = (suggestion.url);
        }
      });
</script>

        


    </body>
</html>
